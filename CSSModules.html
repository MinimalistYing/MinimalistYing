<!DOCTYPE html><html><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
	<meta name="baidu-site-verification" content="e7Xf8PjkZ4">
	<meta name="description" content="小影子的博客，记录工作经验，分享前端技术~">
	<meta name="keyword" content="博客 前端 技术 Blog FrontEnd Experience">
	<title>MinimalistYing.io</title>
	<script charset="utf-8" src="https://hmcdn.baidu.com/static/tongji/plugins/UrlChangeTracker.js"></script><script src="https://hm.baidu.com/hm.js?a3319bfaaf51660db9fb0bbf68d309cb"></script><script>
		var _hmt = _hmt || [];
		(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?a3319bfaaf51660db9fb0bbf68d309cb";
			var s = document.getElementsByTagName("script")[0]; 
			s.parentNode.insertBefore(hm, s);
		})();
	</script>
<link rel="shortcut icon" href="favicon.ico"><link href="main.da41f8ae8d650f389d21.css" rel="stylesheet"><link rel="stylesheet" type="text/css" href="0.ef1bd9dbce806a540650.css"><script charset="utf-8" src="0.e3fc404a03ea51474c0f.bundle.js"></script><script charset="utf-8" src="5.4749751c69454854f14e.bundle.js"></script><link rel="stylesheet" type="text/css" href="2.41696c5507cad7d5f341.css"><script charset="utf-8" src="2.510b9aa996f2336192b4.bundle.js"></script></head>
<body>
	<div id="app"><div><header><h3 class="header-title">MinimalistYing.io</h3><nav><ul><li><a href="/index.html">博客</a></li><li><a href="/memo.html">备忘</a></li><li><a href="https://codepen.io/MinimalistYing" target="_blank">代码库</a></li><li><a href="https://leetcode.com/MinimalistYing" target="_blank">Leetcode</a></li><li><a href="https://stackoverflow.com/users/8459774/minimalistying" target="_blank">StackOverflow</a></li><li><a href="https://github.com/MinimalistYing" target="_blank">Github</a></li></ul></nav></header><div class="blogs"><div class="blog"><div class="my-md"><h1 id="css-modules">CSS Modules</h1>
<h2 id="css-modules-">CSS Modules 解决了什么问题</h2>
<ul>
<li>全局样式冲突</li>
<li>为了避免冲突而导致的样式嵌套层级过深</li>
<li>为了避免冲突而导致的样式命名过于复杂</li>
</ul>
<h2 id="-">如何使用</h2>
<p>Webpack 的 <code>css-loader</code> 就实现了 CSS Modules<br>只需在配置 <code>css-loader</code> 时加上 <code>modules: true</code> 即可，如下</p>
<pre><code class="language-js"><span class="hljs-selector-tag">module</span>: {
  <span class="hljs-attribute">rules</span>: [
    {
      test: /\.css$/,
      use: [
        { loader: <span class="hljs-string">'style-loader'</span> },
        {
          <span class="hljs-attribute">loader</span>: <span class="hljs-string">'css-loader'</span>,
          options: {
            modules: true,
            getLocalIdent: <span class="hljs-string">'[path][name]__[local]--[hash:base64:5]'</span> // 这样最后生成的类名会提供更多信息 方便 DEBUG   
          }
        }
      ]
    }
  ]
}</code></pre>
<p>配置好后，不论是在 Vue / React / jQuery 中都可以开始使用 CSS Modules 了。  </p>
<pre><code class="language-css"><span class="hljs-selector-class">.foo</span> {
  <span class="hljs-attribute">color</span>: red;
}</code></pre>
<pre><code class="language-js"><span class="hljs-keyword">import</span> style <span class="hljs-keyword">from</span> <span class="hljs-string">'./style.css'</span>

ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{style.foo}</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'#app'</span>))</code></pre>
<p>如上代码，最终在页面上呈现的标题字体应该是红色的。<br>并且可以看到 <code>&lt;h1&gt;</code> 标签上的实际类名是类似 <code>_2BQ9qrIFipNbLIGEytIz5Q</code> 的字符串。<br>这样哪怕你在多处用到 <code>.header</code> 这样简单的类名来声明样式，也不用担心会出现样式冲突了。</p>
<hr>
<p>在开启 CSS Modules 后默认的样式都是局部的，也就是说类名会被处理生成唯一的字符串。<br>当然有时我们也希望能设置一些会可以局生效的样式，这个时候可以通过如下方式实现。</p>
<pre><code class="language-less">:global(.foo) {
  <span class="hljs-attr">color</span>: red;
}

<span class="hljs-comment">/* 在使用 LESS / SASS 也可以如下声明 */</span>
:global {
  .bar {
    <span class="hljs-attr">color</span>: blue;
  }

  .test {
    <span class="hljs-attr">color</span>: green;
  }
}</code></pre>
<p>全局样式的类名不会被处理，所以页面上所有符合选择器条件的元素都会被正确的设置样式。</p>
<hr>
<p>CSS Modules 也可以通过 <code>composes</code> 支持样式的复用。</p>
<pre><code class="language-css"><span class="hljs-selector-class">.base</span> {
  <span class="hljs-attribute">background</span>: black;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
}

<span class="hljs-selector-class">.redFont</span> {
  <span class="hljs-attribute">composes</span>: base;
  <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-selector-class">.blueFont</span> {
  <span class="hljs-attribute">composes</span>: base;
  <span class="hljs-attribute">color</span>: blue;
}</code></pre>
<p>需要注意的是 <code>composes</code> 必须是第一条规则，也就是说如下写法是错误的。</p>
<pre><code class="language-css"><span class="hljs-selector-class">.blueFont</span> {
  <span class="hljs-attribute">color</span>: blue;
  <span class="hljs-attribute">composes</span>: base;
}</code></pre>
<p>还可以通过 <code>composes: classNameA classNameB;</code> 来从多个基类继承样式。</p>
<h2 id="-">总结</h2>
<p>工具归工具，正确的使用工具才能更好的解决日常工作中的问题。</p>
</div></div><div id="category" class="category-box"><ul class="blogs-category"><li id="CSSModules" class="selected">CSS Modules</li><li id="GuiLin" class="">桂林山，阳朔水</li><li id="MongoTooManyOpenFiles" class="">记一次解决 MongoDB 报错的心路历程</li><li id="MoesifBug" class="">记一次 Chrome 更新导致插件故障引发的问题</li><li id="Frameworks" class="">关于前端框架选型的一些思考</li><li id="LowDesireSociety" class="">观后感：《低欲望社会》大前研一</li><li id="Cascading" class="">浅谈 CSS（Cascading Style Sheets) 之层叠</li><li id="Axios" class="">Axios 源码解析</li><li id="VueVsReact" class="">React 与 Vue 的一些对比</li><li id="WhyPreflight" class="">为什么 CORS 需要在跨域请求前进行预校验 (Preflight)</li><li id="ArraySort" class="">Array.prototype.sort() 在使用默认 CompareFn 时的问题</li><li id="BinaryTreeType" class="">常见的二叉树类型</li><li id="Ajax" class="">Ajax (Asynchronous JavaScript And XML)</li><li id="XSSCSRF" class="">关于 XSS 以及 CSRF</li><li id="CookieAndWebStorage" class="">Cookie 和 WebStorage</li><li id="CrossOrigin" class="">关于跨域</li><li id="WebpackCommonProblem" class="">记录配置 Webpack 过程中碰到的问题以及解决方案</li><li id="SourceMapAndWebpack" class="">关于 Source Map 以及 Webpack 中 Devtool 的相关配置</li><li id="BinaryTreeTraversal" class="">二叉树的遍历</li><li id="ReactRedux" class="">React-Redux 从入门到后悔</li><li id="Redux" class="">Redux 从入门到放弃</li><li id="PreventModalScroll" class="">如何阻止模态框 (Modal / Popup / Dialog) 弹出后 Body 可滚动</li><li id="PromiseBlog" class="">Promise In ES6</li><li id="Collections" class="">New Collections In ES6</li><li id="ObjectAPI" class=""> Object's New API In ES6</li><li id="ArrayAPI" class="">Array's New API In ES6</li><li id="Generator" class="">Generator in ES6</li><li id="WebpackV3ToV4" class="">Webpack V3 升级至 V4</li><li id="IteratorBlog" class="">Iterator in ES6</li><li id="SymbolBlog" class="">Symbols in ES6</li><li id="GulpPlugin" class="">如何编写一个自己的GulpPlugin</li><li id="WebpackBaseConfig" class="">Webpack(v3.8.1)</li></ul></div><div class="category-toggle"></div></div></div></div>
<script type="text/javascript" src="main.8a084a3c90abaa7c0527.js"></script>
</body></html>